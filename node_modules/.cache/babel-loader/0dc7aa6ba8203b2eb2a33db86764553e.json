{"ast":null,"code":"document.addEventListener(\"turbolinks:load\", function () {\n  $(function () {\n    Stories.init();\n  });\n\n  var Stories = function () {\n    var saveStory = function saveStory() {\n      var myLink = $(this);\n      var storyDiv = myLink.closest('.story_div');\n      var storyId = myLink.attr('data-story-id');\n      var failMsg = Utils.flashMessage('There was a problem saving your story', 'danger');\n      var successMsg = Utils.flashMessage('Story has been saved', 'success');\n      $.ajax({\n        method: 'POST',\n        url: '/visitors/save_story/' + storyId + '.json'\n      }).done(function (data) {\n        if (data.success == true) {\n          myLink.after(successMsg);\n          myLink.replaceWith('<a href=\"javascript:void(0)\" class=\"forget_story_link\" data-story-id=' + storyId + '>FORGET THIS STORY</a>');\n          $('.forget_story_link').on('click', forgetStory);\n        } else {\n          myLink.after(failMsg);\n        }\n      }).fail(function (data) {\n        myLink.after(failMsg);\n      }).always(function () {\n        var alertDiv = storyDiv.find('.alert');\n        alertDiv.delay(3000).fadeOut(1000);\n      });\n    };\n\n    var cannotSaveStory = function cannotSaveStory() {\n      var myLink = $(this);\n      myLink.after(Utils.flashMessage('Sign In to save Story', 'danger'));\n      var alertDiv = myLink.siblings('.alert');\n      alertDiv.delay(3000).fadeOut(1000);\n    };\n\n    var forgetStory = function forgetStory() {\n      var myLink = $(this);\n      var storyDiv = myLink.closest('.story_div');\n      var storyId = myLink.attr('data-story-id');\n      var successMsg = Utils.flashMessage('Story has been forgotten', 'success');\n      var failMsg = Utils.flashMessage('There was an error forgetting your Story', 'danger');\n      $.ajax({\n        method: 'POST',\n        url: '/visitors/forget_story/' + storyId + '.json'\n      }).done(function (data) {\n        if (data.success == true) {\n          myLink.after(successMsg);\n          myLink.replaceWith('<a href=\"javascript:void(0)\" class=\"save_story_link\" data-story-id=' + storyId + '>SAVE STORY</a>');\n          $('.save_story_link').on('click', saveStory);\n        } else {\n          myLink.after(failMsg);\n        }\n      }).fail(function () {\n        myLink.after(failMsg);\n      }).always(function () {\n        var alertDiv = storyDiv.find('.alert');\n        alertDiv.delay(3000).fadeOut(1000);\n      });\n    };\n\n    return {\n      init: function init() {\n        $('.save_story_link').on('click', saveStory);\n        $('.cannot_save_story_link').on('click', cannotSaveStory);\n        $('.forget_story_link').on('click', forgetStory);\n        $('#story_location_ids').chosen({\n          width: '400px',\n          placeholder_text_multiple: 'Choose Locations'\n        });\n        $('#story_place_category_ids').chosen({\n          width: '400px',\n          placeholder_text_multiple: 'Choose Place Categories'\n        });\n        $('#story_story_category_ids').chosen({\n          width: '400px',\n          placeholder_text_multiple: 'Choose Story Categories'\n        });\n      }\n    };\n  }();\n});","map":{"version":3,"sources":["/Users/kekoa428/Projects/work/sap/sap3-gg/app/javascript/js/stories.js"],"names":["document","addEventListener","$","Stories","init","saveStory","myLink","storyDiv","closest","storyId","attr","failMsg","Utils","flashMessage","successMsg","ajax","method","url","done","data","success","after","replaceWith","on","forgetStory","fail","always","alertDiv","find","delay","fadeOut","cannotSaveStory","siblings","chosen","width","placeholder_text_multiple"],"mappings":"AAAAA,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,EAA6C,YAAY;AACvDC,EAAAA,CAAC,CAAC,YAAU;AACVC,IAAAA,OAAO,CAACC,IAAR;AACD,GAFA,CAAD;;AAIA,MAAID,OAAO,GAAG,YAAU;AAEtB,QAAIE,SAAS,GAAG,SAAZA,SAAY,GAAU;AACxB,UAAIC,MAAM,GAAGJ,CAAC,CAAC,IAAD,CAAd;AACA,UAAIK,QAAQ,GAAGD,MAAM,CAACE,OAAP,CAAe,YAAf,CAAf;AACA,UAAIC,OAAO,GAAGH,MAAM,CAACI,IAAP,CAAY,eAAZ,CAAd;AACA,UAAIC,OAAO,GAAGC,KAAK,CAACC,YAAN,CAAmB,uCAAnB,EAA4D,QAA5D,CAAd;AACA,UAAIC,UAAU,GAAGF,KAAK,CAACC,YAAN,CAAmB,sBAAnB,EAA2C,SAA3C,CAAjB;AACAX,MAAAA,CAAC,CAACa,IAAF,CAAO;AACLC,QAAAA,MAAM,EAAE,MADH;AAELC,QAAAA,GAAG,EAAE,0BAA0BR,OAA1B,GAAoC;AAFpC,OAAP,EAICS,IAJD,CAIM,UAASC,IAAT,EAAc;AAClB,YAAGA,IAAI,CAACC,OAAL,IAAgB,IAAnB,EAAwB;AACtBd,UAAAA,MAAM,CAACe,KAAP,CAAaP,UAAb;AACAR,UAAAA,MAAM,CAACgB,WAAP,CAAmB,0EAA0Eb,OAA1E,GAAoF,wBAAvG;AACAP,UAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBqB,EAAxB,CAA2B,OAA3B,EAAoCC,WAApC;AACD,SAJD,MAKK;AACHlB,UAAAA,MAAM,CAACe,KAAP,CAAaV,OAAb;AACD;AACF,OAbD,EAcCc,IAdD,CAcM,UAASN,IAAT,EAAc;AAClBb,QAAAA,MAAM,CAACe,KAAP,CAAaV,OAAb;AACD,OAhBD,EAiBCe,MAjBD,CAiBQ,YAAU;AAChB,YAAIC,QAAQ,GAAGpB,QAAQ,CAACqB,IAAT,CAAc,QAAd,CAAf;AACAD,QAAAA,QAAQ,CAACE,KAAT,CAAe,IAAf,EAAqBC,OAArB,CAA6B,IAA7B;AACD,OApBD;AAqBD,KA3BD;;AA6BA,QAAIC,eAAe,GAAG,SAAlBA,eAAkB,GAAU;AAC9B,UAAIzB,MAAM,GAAGJ,CAAC,CAAC,IAAD,CAAd;AACAI,MAAAA,MAAM,CAACe,KAAP,CAAaT,KAAK,CAACC,YAAN,CAAmB,uBAAnB,EAA4C,QAA5C,CAAb;AACA,UAAIc,QAAQ,GAAGrB,MAAM,CAAC0B,QAAP,CAAgB,QAAhB,CAAf;AACAL,MAAAA,QAAQ,CAACE,KAAT,CAAe,IAAf,EAAqBC,OAArB,CAA6B,IAA7B;AACD,KALD;;AAOA,QAAIN,WAAW,GAAG,SAAdA,WAAc,GAAU;AAC1B,UAAIlB,MAAM,GAAGJ,CAAC,CAAC,IAAD,CAAd;AACA,UAAIK,QAAQ,GAAGD,MAAM,CAACE,OAAP,CAAe,YAAf,CAAf;AACA,UAAIC,OAAO,GAAGH,MAAM,CAACI,IAAP,CAAY,eAAZ,CAAd;AACA,UAAII,UAAU,GAAGF,KAAK,CAACC,YAAN,CAAmB,0BAAnB,EAA+C,SAA/C,CAAjB;AACA,UAAIF,OAAO,GAAGC,KAAK,CAACC,YAAN,CAAmB,0CAAnB,EAA+D,QAA/D,CAAd;AACAX,MAAAA,CAAC,CAACa,IAAF,CAAO;AACLC,QAAAA,MAAM,EAAE,MADH;AAELC,QAAAA,GAAG,EAAE,4BAA4BR,OAA5B,GAAsC;AAFtC,OAAP,EAICS,IAJD,CAIM,UAASC,IAAT,EAAc;AAClB,YAAGA,IAAI,CAACC,OAAL,IAAgB,IAAnB,EAAwB;AACtBd,UAAAA,MAAM,CAACe,KAAP,CAAaP,UAAb;AACAR,UAAAA,MAAM,CAACgB,WAAP,CAAmB,wEAAwEb,OAAxE,GAAkF,iBAArG;AACAP,UAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBqB,EAAtB,CAAyB,OAAzB,EAAkClB,SAAlC;AACD,SAJD,MAKI;AACFC,UAAAA,MAAM,CAACe,KAAP,CAAaV,OAAb;AACD;AACF,OAbD,EAcCc,IAdD,CAcM,YAAU;AACdnB,QAAAA,MAAM,CAACe,KAAP,CAAaV,OAAb;AACD,OAhBD,EAiBCe,MAjBD,CAiBQ,YAAU;AAChB,YAAIC,QAAQ,GAAGpB,QAAQ,CAACqB,IAAT,CAAc,QAAd,CAAf;AACAD,QAAAA,QAAQ,CAACE,KAAT,CAAe,IAAf,EAAqBC,OAArB,CAA6B,IAA7B;AACD,OApBD;AAqBD,KA3BD;;AA6BA,WAAO;AACL1B,MAAAA,IAAI,EAAE,gBAAU;AACdF,QAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBqB,EAAtB,CAAyB,OAAzB,EAAkClB,SAAlC;AACAH,QAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BqB,EAA7B,CAAgC,OAAhC,EAAyCQ,eAAzC;AACA7B,QAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBqB,EAAxB,CAA2B,OAA3B,EAAoCC,WAApC;AACAtB,QAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyB+B,MAAzB,CAAgC;AAACC,UAAAA,KAAK,EAAE,OAAR;AAAiBC,UAAAA,yBAAyB,EAAE;AAA5C,SAAhC;AACAjC,QAAAA,CAAC,CAAC,2BAAD,CAAD,CAA+B+B,MAA/B,CAAsC;AAACC,UAAAA,KAAK,EAAE,OAAR;AAAiBC,UAAAA,yBAAyB,EAAE;AAA5C,SAAtC;AACAjC,QAAAA,CAAC,CAAC,2BAAD,CAAD,CAA+B+B,MAA/B,CAAsC;AAACC,UAAAA,KAAK,EAAE,OAAR;AAAiBC,UAAAA,yBAAyB,EAAE;AAA5C,SAAtC;AACD;AARI,KAAP;AAWD,GA9Ea,EAAd;AA+ED,CApFD","sourcesContent":["document.addEventListener(\"turbolinks:load\", function () {\n  $(function(){\n    Stories.init();\n  });\n\n  var Stories = function(){\n\n    var saveStory = function(){\n      var myLink = $(this);\n      var storyDiv = myLink.closest('.story_div')\n      var storyId = myLink.attr('data-story-id');\n      var failMsg = Utils.flashMessage('There was a problem saving your story', 'danger');\n      var successMsg = Utils.flashMessage('Story has been saved', 'success');\n      $.ajax({\n        method: 'POST',\n        url: '/visitors/save_story/' + storyId + '.json'\n      })\n      .done(function(data){\n        if(data.success == true){\n          myLink.after(successMsg);\n          myLink.replaceWith('<a href=\"javascript:void(0)\" class=\"forget_story_link\" data-story-id=' + storyId + '>FORGET THIS STORY</a>');\n          $('.forget_story_link').on('click', forgetStory);\n        }\n        else {\n          myLink.after(failMsg);\n        }\n      })\n      .fail(function(data){\n        myLink.after(failMsg);\n      })\n      .always(function(){\n        var alertDiv = storyDiv.find('.alert');\n        alertDiv.delay(3000).fadeOut(1000);\n      });\n    }\n\n    var cannotSaveStory = function(){\n      var myLink = $(this);\n      myLink.after(Utils.flashMessage('Sign In to save Story', 'danger'));\n      var alertDiv = myLink.siblings('.alert')\n      alertDiv.delay(3000).fadeOut(1000);\n    }\n\n    var forgetStory = function(){\n      var myLink = $(this);\n      var storyDiv = myLink.closest('.story_div')\n      var storyId = myLink.attr('data-story-id');\n      var successMsg = Utils.flashMessage('Story has been forgotten', 'success');\n      var failMsg = Utils.flashMessage('There was an error forgetting your Story', 'danger');\n      $.ajax({\n        method: 'POST',\n        url: '/visitors/forget_story/' + storyId + '.json'\n      })\n      .done(function(data){\n        if(data.success == true){\n          myLink.after(successMsg);\n          myLink.replaceWith('<a href=\"javascript:void(0)\" class=\"save_story_link\" data-story-id=' + storyId + '>SAVE STORY</a>');\n          $('.save_story_link').on('click', saveStory);\n        }\n        else{\n          myLink.after(failMsg);\n        }\n      })\n      .fail(function(){\n        myLink.after(failMsg);\n      })\n      .always(function(){\n        var alertDiv = storyDiv.find('.alert')\n        alertDiv.delay(3000).fadeOut(1000);\n      });\n    }\n\n    return {\n      init: function(){\n        $('.save_story_link').on('click', saveStory);\n        $('.cannot_save_story_link').on('click', cannotSaveStory);\n        $('.forget_story_link').on('click', forgetStory);\n        $('#story_location_ids').chosen({width: '400px', placeholder_text_multiple: 'Choose Locations'});\n        $('#story_place_category_ids').chosen({width: '400px', placeholder_text_multiple: 'Choose Place Categories'});\n        $('#story_story_category_ids').chosen({width: '400px', placeholder_text_multiple: 'Choose Story Categories'});\n      }\n    }\n\n  }();\n});\n"]},"metadata":{},"sourceType":"module"}