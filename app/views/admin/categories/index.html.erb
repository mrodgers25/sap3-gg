<div class="container-fluid">
  <div class="links mb-2 text-right">
    <%= link_to new_admin_category_path, class: "btn btn-sm btn-success" do %>
      <i class="fas fa-plus mr-1"></i> + Add Category
    <% end %>
  </div>
  <div class="jumbotron bg-white admin-index-page">
    <div class="header text-center">
      <h4><i class="fas fa-map-marker-alt mr-1"></i> Categories</h4>
    </div>

    <hr class="my-4">

    <div class="table-div">
      <table class="table table-bordered table-hover">
        <thead>
          <tr>
            <th>Name</th>
            <th>Parent</th>
            <th>Children</th>
            <th>Description</th>
            <th>Category Type</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
           <% @categories.each do |category| %>
            <tr>
               <td><%= category.name %></td>
              <td>
               <% if category.ancestors.any? %>
                  <% category.ancestors.each do |a| %>
                    <%= link_to a.name, admin_category_path(a) %>
                  <% end %>
               <% end %>
              </td>
               <td>
               <% if category.children.any? %>
                  <% category.children.each do |a| %>
                    <%= link_to a.name, admin_category_path(a) %>,
                  <% end %>
               <% end %>
              </td>
              <td><%= category.description %></td>
              <td><%= category.reference %></td>
              <td>
                <%= link_to admin_category_path(category), class: "btn btn-sm btn-outline-primary", data: { toggle: 'tooltip', placement: 'top', title: 'View category page' } do %>
                  <i class="fas fa-eye"></i>
                <% end %>
        
                <%= link_to edit_admin_category_path(category), class: "btn btn-sm btn-outline-warning", data: { toggle: 'tooltip', placement: 'top', title: 'Edit category' } do %>
                  <i class="fas fa-edit"></i>
                <% end %>
                <%= link_to admin_category_path(category), method: :delete, class: "btn btn-sm btn-outline-danger delete-link", data: { toggle: 'tooltip', placement: 'top', title: 'Delete category', confirm: 'Are you sure?' } do %>
                  <i class="fas fa-times"></i>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <hr class="my-4">

    <div class='pagination'>
      <%== pagy_bootstrap_nav(@pagy) %>
    </div>


  </div>
</div>
<table>
  
